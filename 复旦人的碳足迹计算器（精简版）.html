<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¤æ—¦äººçš„ç¢³è¶³è¿¹è®¡ç®—å™¨</title>
    <style>
        :root {
            --primary-color: #2E7D32;
            --secondary-color: #4CAF50;
            --light-green: #C8E6C9;
            --dark-green: #1B5E20;
            --white: #FFFFFF;
        }
        
        body {
            font-family: 'Microsoft YaHei', sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #F1F8E9;
        }
        
        .container {
            background-color: var(--white);
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }
        
        .page {
            display: none;
        }
        
        .page.active {
            display: block;
        }
        
        h1 {
            color: var(--primary-color);
            text-align: center;
            margin-bottom: 30px;
        }
        
        .section {
            margin-bottom: 30px;
            padding: 15px;
            border: 1px solid var(--light-green);
            border-radius: 5px;
        }
        
        .section h2 {
            color: var(--dark-green);
            margin-top: 0;
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        label {
            display: block;
            margin-bottom: 5px;
            color: var(--dark-green);
        }
        
        select, input {
            width: 100%;
            padding: 8px;
            border: 1px solid var(--secondary-color);
            border-radius: 4px;
            box-sizing: border-box;
        }
        
        button {
            background-color: var(--primary-color);
            color: var(--white);
            padding: 12px 24px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            margin: 10px;
        }
        
        button:hover {
            background-color: var(--dark-green);
        }
        
        .navigation {
            display: flex;
            justify-content: center;
            margin-top: 20px;
        }
        
        #result {
            margin-top: 20px;
            padding: 20px;
            background-color: var(--light-green);
            border-radius: 5px;
        }
        
        .result-value {
            font-size: 24px;
            color: var(--primary-color);
            font-weight: bold;
            text-align: center;
            margin: 20px 0;
        }
        
        .tips {
            margin-top: 15px;
            font-size: 14px;
            color: var(--dark-green);
        }
        
        .home-page {
            text-align: center;
            padding: 40px 20px;
        }
        
        .home-icon {
            font-size: 64px;
            color: var(--primary-color);
            margin-bottom: 20px;
        }
        
        .report-card {
            background-color: var(--light-green);
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        
        .progress-bar {
            width: 100%;
            height: 20px;
            background-color: var(--white);
            border-radius: 10px;
            margin: 10px 0;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background-color: var(--primary-color);
            transition: width 0.5s ease-in-out;
        }

        .category-item {
            margin: 10px 0;
        }

        .category-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 5px;
        }

        .category-name {
            font-weight: bold;
            color: var(--dark-green);
        }

        .category-value {
            color: var(--primary-color);
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- é¦–é¡µ -->
        <div id="homePage" class="page active">
            <div class="home-page">
                <div class="home-icon">ğŸŒ±</div>
                <h1>å¤æ—¦äººçš„ç¢³è¶³è¿¹è®¡ç®—å™¨</h1>
                <p>äº†è§£æ‚¨çš„æ—¥å¸¸ç”Ÿæ´»å¯¹ç¯å¢ƒçš„å½±å“</p>
                <p>é€šè¿‡ç®€å•çš„é—®å·ï¼Œè®¡ç®—æ‚¨çš„ä¸ªäººç¢³è¶³è¿¹</p>
                <button onclick="showPage('formPage')">å¼€å§‹è®¡ç®—</button>
            </div>
        </div>

        <!-- è¡¨å•é¡µ -->
        <div id="formPage" class="page">
            <h1>ç¢³è¶³è¿¹è®¡ç®—é—®å·</h1>
            <form id="carbonForm">
                <div class="section">
                    <h2>1. äº¤é€šå‡ºè¡Œ</h2>
                    <div class="form-group">
                        <label>æ ¡å›­å†…ä¸»è¦äº¤é€šæ–¹å¼ï¼š</label>
                        <select name="campusTransport" required>
                            <option value="walk">æ­¥è¡Œ</option>
                            <option value="bike">è‡ªè¡Œè½¦</option>
                            <option value="ebike">ç”µåŠ¨è‡ªè¡Œè½¦</option>
                            <option value="car">ç§å®¶è½¦</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>é•¿é€”äº¤é€šæ–¹å¼ï¼ˆå›å®¶/æ—…è¡Œï¼‰ï¼š</label>
                        <select name="longTravelMode" required>
                            <option value="plane">é£æœº</option>
                            <option value="train">ç«è½¦/é«˜é“</option>
                            <option value="bus">å¤§å·´</option>
                            <option value="car">ç§å®¶è½¦</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>æ¯å­¦æœŸé•¿é€”å‡ºè¡Œé¢‘ç‡ï¼ˆæ¬¡ï¼‰ï¼š</label>
                        <input type="number" name="longTravelFreq" min="0" required>
                    </div>
                </div>

                <div class="section">
                    <h2>2. èƒ½æºä½¿ç”¨</h2>
                    <div class="form-group">
                        <label>å¤å­£æ—¥å‡ç©ºè°ƒä½¿ç”¨æ—¶é•¿ï¼ˆå°æ—¶ï¼‰ï¼š</label>
                        <input type="number" name="acUsage" min="0" max="24" required>
                    </div>
                    <div class="form-group">
                        <label>å†¬å­£æ—¥å‡å–æš–å™¨ä½¿ç”¨æ—¶é•¿ï¼ˆå°æ—¶ï¼‰ï¼š</label>
                        <input type="number" name="heaterUsage" min="0" max="24" required>
                    </div>
                    <div class="form-group">
                        <label>æ—¥å‡ç”µå­è®¾å¤‡ä½¿ç”¨æ—¶é•¿ï¼ˆå°æ—¶ï¼‰ï¼š</label>
                        <input type="number" name="deviceUsage" min="0" max="24" required>
                    </div>
                    <div class="form-group">
                        <label>æ¯æ¬¡æ·‹æµ´æ—¶é•¿ï¼ˆåˆ†é’Ÿï¼‰ï¼š</label>
                        <input type="number" name="showerTime" min="0" required>
                    </div>
                    <div class="form-group">
                        <label>æ¯å‘¨æ·‹æµ´æ¬¡æ•°ï¼š</label>
                        <input type="number" name="showerFreq" min="0" max="7" required>
                    </div>
                </div>

                <div class="section">
                    <h2>3. é¥®é£Ÿä¹ æƒ¯</h2>
                    <div class="form-group">
                        <label>æ¯å‘¨è‚‰ç±»æ¶ˆè´¹æ¬¡æ•°ï¼š</label>
                        <input type="number" name="meatConsumption" min="0" required>
                    </div>
                    <div class="form-group">
                        <label>æ¯å‘¨ä¹³åˆ¶å“æ¶ˆè´¹æ¬¡æ•°ï¼š</label>
                        <input type="number" name="dairyConsumption" min="0" required>
                    </div>
                    <div class="form-group">
                        <label>æ¯å‘¨å¤–å–æ¬¡æ•°ï¼š</label>
                        <input type="number" name="takeawayFreq" min="0" required>
                    </div>
                    <div class="form-group">
                        <label>é£Ÿç‰©æµªè´¹æƒ…å†µï¼š</label>
                        <select name="foodWaste" required>
                            <option value="none">ä»ä¸æµªè´¹</option>
                            <option value="sometimes">å¶å°”æµªè´¹</option>
                            <option value="often">ç»å¸¸æµªè´¹</option>
                        </select>
                    </div>
                </div>

                <div class="section">
                    <h2>4. æ¶ˆè´¹ä¹ æƒ¯</h2>
                    <div class="form-group">
                        <label>æ¯æœˆè´­ä¹°è¡£ç‰©ä»¶æ•°ï¼š</label>
                        <input type="number" name="clothesPurchase" min="0" required>
                    </div>
                    <div class="form-group">
                        <label>æ¯å¹´è´­ä¹°ç”µå­äº§å“ä»¶æ•°ï¼š</label>
                        <input type="number" name="electronicsPurchase" min="0" required>
                    </div>
                    <div class="form-group">
                        <label>æ¯æœˆç½‘è´­æ¬¡æ•°ï¼š</label>
                        <input type="number" name="onlineShopping" min="0" required>
                    </div>
                </div>

                <div class="section">
                    <h2>5. åƒåœ¾å¤„ç†</h2>
                    <div class="form-group">
                        <label>æ¯å‘¨åƒåœ¾è¢‹æ•°é‡ï¼š</label>
                        <input type="number" name="wasteBags" min="0" required>
                    </div>
                    <div class="form-group">
                        <label>åƒåœ¾åˆ†ç±»æƒ…å†µï¼š</label>
                        <select name="wasteSort" required>
                            <option value="always">æ€»æ˜¯åˆ†ç±»</option>
                            <option value="sometimes">å¶å°”åˆ†ç±»</option>
                            <option value="rarely">å¾ˆå°‘åˆ†ç±»</option>
                        </select>
                    </div>
                </div>

                <div class="navigation">
                    <button type="button" onclick="showPage('homePage')">è¿”å›é¦–é¡µ</button>
                    <button type="submit">æäº¤è®¡ç®—</button>
                </div>
            </form>
        </div>

        <!-- æŠ¥å‘Šé¡µ -->
        <div id="reportPage" class="page">
            <h1>ç¢³è¶³è¿¹åˆ†ææŠ¥å‘Š</h1>
            <div class="report-card">
                <h2>æ€»ä½“ç¢³æ’æ”¾</h2>
                <div class="result-value"><span id="carbonValue">0</span> å¨COâ‚‚/æœˆ</div>
                <div class="progress-bar">
                    <div id="carbonProgress" class="progress-fill"></div>
                </div>
            </div>

            <div class="report-card">
                <h2>å„é¡¹å æ¯”åˆ†æ</h2>
                <div id="categoryBreakdown"></div>
            </div>

            <div class="tips">
                <h3>å‚è€ƒå€¼</h3>
                <ul>
                    <li>ä½ç¢³ç”Ÿæ´»æ°´å¹³ï¼šå°äº0.2å¨COâ‚‚/æœˆ</li>
                    <li>ä¸€èˆ¬ç”Ÿæ´»æ°´å¹³ï¼š0.2-0.3å¨COâ‚‚/æœˆ</li>
                    <li>é«˜ç¢³ç”Ÿæ´»æ°´å¹³ï¼šå¤§äº0.3å¨COâ‚‚/æœˆ</li>
                </ul>
            </div>

            <div class="navigation">
                <button onclick="showPage('homePage')">è¿”å›é¦–é¡µ</button>
                <button onclick="showPage('formPage')">é‡æ–°è®¡ç®—</button>
            </div>
        </div>
    </div>

    <script>
        function showPage(pageId) {
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            document.getElementById(pageId).classList.add('active');
        }

        function calculateCarbonFootprint(data) {
            let total = 0;
            let breakdown = {
                transport: 0,
                energy: 0,
                food: 0,
                consumption: 0,
                waste: 0
            };
            
            // 1. äº¤é€šå‡ºè¡Œç¢³è¶³è¿¹
            const transportScore = {
                walk: 0,
                bike: 0,
                ebike: 0.6,
                car: 23.0
            };
            breakdown.transport += transportScore[data.campusTransport] || 0;
            
            const longTravelScore = {
                plane: 253,
                train: 27,
                bus: 32,
                car: 115
            };
            breakdown.transport += (longTravelScore[data.longTravelMode] || 0) * (Number(data.longTravelFreq) / 4);
            
            // 2. èƒ½æºä½¿ç”¨ç¢³è¶³è¿¹
            breakdown.energy += Number(data.acUsage) * 15 * 0.5 * 0.5819; // å¤å­£15å¤©å¹³å‡
            breakdown.energy += Number(data.heaterUsage) * 15 * 1 * 0.5819; // å†¬å­£15å¤©å¹³å‡
            breakdown.energy += Number(data.deviceUsage) * 30 * 0.1 * 0.5819;
            breakdown.energy += (Number(data.showerTime) * Number(data.showerFreq) * 4 * 0.04);
            
            // 3. é¥®é£Ÿç¢³è¶³è¿¹
            breakdown.food += Number(data.meatConsumption) * 4 * 0.8;
            breakdown.food += Number(data.dairyConsumption) * 4 * 0.3;
            breakdown.food += Number(data.takeawayFreq) * 4 * 0.5;
            
            const foodWasteMultiplier = {
                none: 1,
                sometimes: 1.2,
                often: 1.4
            };
            breakdown.food *= (foodWasteMultiplier[data.foodWaste] || 1);
            
            // 4. æ¶ˆè´¹ç¢³è¶³è¿¹
            breakdown.consumption += (Number(data.clothesPurchase) / 4) * 8;
            breakdown.consumption += (Number(data.electronicsPurchase) / 12) * 30;
            breakdown.consumption += Number(data.onlineShopping) * 0.4;
            
            // 5. åƒåœ¾å¤„ç†ç¢³è¶³è¿¹
            const wasteSortMultiplier = {
                always: 0.8,
                sometimes: 1,
                rarely: 1.2
            };
            breakdown.waste += Number(data.wasteBags) * 4 * 0.3 * (wasteSortMultiplier[data.wasteSort] || 1);
            
            total = Object.values(breakdown).reduce((a, b) => a + b, 0);
            
            return {
                total: (total / 1000).toFixed(2),
                breakdown: breakdown
            };
        }

        document.getElementById('carbonForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const formData = new FormData(e.target);
            const data = Object.fromEntries(formData.entries());
            const result = calculateCarbonFootprint(data);
            
            // æ›´æ–°ç¢³è¶³è¿¹å€¼
            document.getElementById('carbonValue').textContent = result.total;
            
            // æ›´æ–°è¿›åº¦æ¡
            const progressBar = document.getElementById('carbonProgress');
            const percentage = Math.min((result.total / 0.4) * 100, 100); // 0.4ä½œä¸ºæœ€å¤§å‚è€ƒå€¼
            progressBar.style.width = percentage + '%';
            
            // æ›´æ–°åˆ†ç±»æ˜ç»†
            const breakdownDiv = document.getElementById('categoryBreakdown');
            const categories = {
                transport: 'äº¤é€šå‡ºè¡Œ',
                energy: 'èƒ½æºä½¿ç”¨',
                food: 'é¥®é£Ÿç¢³æ’',
                consumption: 'æ¶ˆè´¹ç¢³æ’',
                waste: 'åƒåœ¾å¤„ç†'
            };
            
            breakdownDiv.innerHTML = Object.entries(result.breakdown)
                .map(([key, value]) => `
                    <div class="category-item">
                        <div class="category-label">
                            <span class="category-name">${categories[key]}</span>
                            <span class="category-value">${(value/1000).toFixed(3)}å¨COâ‚‚</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: ${(value/result.total/10)}%"></div>
                        </div>
                    </div>
                `).join('');
            
            // æ˜¾ç¤ºæŠ¥å‘Šé¡µ
            showPage('reportPage');
        });
    </script>
</body>
</html>